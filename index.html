<html>
<head>
	<title>Escape Room 2</title>
	
	<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
	
	<style>
		body {
			margin: 0px;
			font-family: Poppins;
			background: linear-gradient(to bottom, #FFE082, #E3F2FD, #FFF8E1);
		}
		
		#intro {
			position: fixed;
			margin: 0px;
			width: 100%;
			height: 100%;
			object-fit: cover;
			z-index: 2;
			opacity: 1;
			transition: opacity 2s ease;
		}
		
		#info {
			display: none;
			width: 100%;
			display: flex;
			flex-direction: column;
			align-items: center;
			text-align: justify;
		}
		
		#info h1 {
			margin: 0px;
			font-size: 50px;
			color: #1E3A5F;
		}
	
		#info li { 
			font-size: 30px; 
			margin: 5px;
			color: #B76E00;
		}
		
		#info p {
			margin: 30px;
			font-size: 30px;
			color: #B76E00;
		}
		
		.image {
			display: flex;
			justify-content: center;
			flex-wrap: wrap;
			margin: 30px;
			gap: 20px;
		}
		
		.image img {
			border: 3px solid black;
			border-radius: 15px;
		}
		
		.container {
			background: #FAF3DD;
			border-radius: 20px;
			border: 3px solid black;
			padding: 30px;
			width: 90%;
			max-width: 800px;
			text-align: center;
			margin-top: 30px;
			margin-bottom: 50px; 
		}
		
		label {
			display: block;
			margin: 10px 0 5px;
			color: #B76E00;
			text-align: left;
			font-size: 16px;
		}
		
		input[type="text"],
		textarea {
			width: 100%;
			padding: 10px;
			border-radius: 6px;
			border: 1px solid #aaa;
			font-size: 16px;
		}

		.radio-group {
			display: flex;
			flex-wrap: wrap;
			justify-content: space-between;
		}

		.radio-group label {
			flex: 1 1 45%;
			cursor: pointer;
			font-size: 15px;
		}

		.rating {
			display: flex;
			justify-content: center;
			font-size: 30px;
			margin: 10px 0;
		}

		.star {
			color: #ccc;
			cursor: pointer;
			transition: color 0.2s;
			margin: 0 3px;
		}

		.star.active {
			color: gold;
		}

		textarea {
			resize: none;
			height: 80px;
		}

		.button-group {
			display: flex;
			justify-content: center;
			gap: 15px;
			margin-top: 20px;
		}

		button {
			background-color: #FFB300;
			color: white;
			padding: 10px 20px;
			border: none;
			border-radius: 6px;
			cursor: pointer;
			font-size: 16px;
			transition: background 0.3s;
		}

		button:hover:enabled {
			background-color: #F9A602;
		}

		button:disabled {
			background-color: #5E7D8A;
			cursor: not-allowed;
		}
		
		button {    
		  font-size: 30px; 
		  margin-top: 20px;
		  padding: 15px;
		  width: 600px;
		  border-radius: 30px;
		  border: 3px solid black;
		}
		
		button:hover { background-color: #B0B0B0; }
		
	</style>
</head>
<body>
		<video id="intro" controls poster>
			<source src="Introduction.mp4" type="video/mp4">
			Browser Anda tidak mendukung video.
		</video>
		
		<audio id="music" hidden loop>
			<source src="Soundtrack.mp3" type="audio/mp3">
		</audio>
		
		<div id="info">
			<h1>Welcome to Escape Room 2!</h1>
			<p>The ultimate test of speed, agility, and survival! Join players from around the world in a desperate sprint to the finish line. Whether you're running from a crushing flood, a deadly lava wave, or a corrosive acid bath, the goal is simple: Find the button, solve the puzzle, and reach the exit before the disaster consumes you!<br>
			Can you outrun the inevitable? Grab your friends and jump in!<br>
			Expecting alot of Bugs and Glitch because this is still on progress!</p>
			
		<video width="800" controls loop>
			<source src="Gameplay.mp4" type="video/mp4">
		</video>
			
			<h1 style="margin: 30px 0px 0px;">How to Play Escape Room 2</h1>
			<ul>
			  <li>Objective: Reach the exit before the rising hazard (water or lava) catches you.</li>
			  <li>Press Buttons: Find and press highlighted buttons to unlock new areas and continue forward.</li>
			  <li>Parkour Challenge: Jump and climb through obstacles to reach the buttons or the exit — falling means death.</li>
			  <li>Rising Hazard: Move quickly! The water or lava will rise over time, killing anyone too slow.</li>
			  <li>Victory: Survive by reaching the safe zone before the hazard or time runs out.</li>
			</ul>
			
		<div class="image">
			<img src='Honey1.png' width='600'>
			<img src='Honey2.png' width='600'>
		</div>
			
			<h1>Credits</h1>
			<ul>
				<li>shinthaicyn – Project manager</li>
				<li>JfJoJoz – Roblox developer</li>
				<li>DontAnnoyedMe – Website developer</li>
			</ul>
			
		<div class="image">
			<img src='Honey3.png' width='600'>
			<img src='Honey4.png' width='600'>
		</div>
		
			<a href="https://www.roblox.com/games/71601767318114/Escape-Room-2-WIP" target="_blank">
				<button>Challenge Yourself</button>
			</a>

			<div class="container">
				<h1>Escape Room 2 Player Form</h1>

				<form id="escapeForm" name="submit-to-google-sheet">
				  <label for="nama">Player Name</label>
				  <input type="text" id="nama" name="Name" placeholder="Enter your name" required />

				  <label>Status</label>
				  <div class="radio-group">
					<label><input type="radio" name="Status" value="SD" required>Elementary School</label>
					<label><input type="radio" name="Status" value="SMP">Junior High School</label>
					<label><input type="radio" name="Status" value="SMA">Senior High School</label>
					<label><input type="radio" name="Status" value="Kuliah">University</label>
					<label><input type="radio" name="Status" value="Keluarga">Family</label>
				  </div>

				  <label for="username">Roblox Username</label>
				  <input type="text" id="username" name="Username" placeholder="Enter Roblox username" required />

				  <label>Game Rating</label>
				  <div class="rating" id="rating">
					<span class="star" data-value="1">★</span>
					<span class="star" data-value="2">★</span>
					<span class="star" data-value="3">★</span>
					<span class="star" data-value="4">★</span>
					<span class="star" data-value="5">★</span>
				  </div>
				  <input type="hidden" name="Rating" id="ratingValue">

				  <label for="komentar">Feedback</label>
				  <textarea id="komentar" name="Feedback" placeholder="Write your feedback here..."></textarea>

				  <div class="button-group">
					<button type="submit" id="submitBtn">Submit</button>
					<button type="reset" id="resetBtn">Reset</button>
				  </div>
				</form>
			</div>
		</div>

		<script>
			const stars = document.querySelectorAll(".star");
			const ratingValue = document.getElementById("ratingValue");
			const namaInput = document.getElementById("nama");
			const usernameInput = document.getElementById("username");
			const submitBtn = document.getElementById("submitBtn");
			const resetBtn = document.getElementById("resetBtn");
			const form = document.forms["submit-to-google-sheet"];
			const scriptURL = "https://script.google.com/macros/s/AKfycby3sRM26QU5jTy_MUqASZws4-ThnsjjSCfMy7KWpiSYYkI5MVBrzFjKa-N3d_4JctU2/exec";

			namaInput.addEventListener("input", () => {
			  namaInput.value = namaInput.value.replace(/[^A-Za-zÀ-ÿ\s]/g, "");
			});

			usernameInput.addEventListener("input", () => {
			  usernameInput.value = usernameInput.value.replace(/[^A-Za-z0-9@]/g, "");
			});

			stars.forEach(star => {
			  star.addEventListener("click", () => {
				const value = star.getAttribute("data-value");
				ratingValue.value = value;
				stars.forEach(s => s.classList.remove("active"));
				for (let i = 0; i < value; i++) stars[i].classList.add("active");
			  });
			});

			resetBtn.addEventListener("click", () => {
			  ratingValue.value = "";
			  stars.forEach(s => s.classList.remove("active"));
			});

			form.addEventListener("submit", async (e) => {
			  e.preventDefault();
			  submitBtn.disabled = true;

			  let countdown = 5;
			  const originalText = submitBtn.textContent;
			  submitBtn.textContent = `Wait ${countdown}s`;

			  const timer = setInterval(() => {
				countdown--;
				submitBtn.textContent = `Wait ${countdown}s`;
				if (countdown <= 0) {
				  clearInterval(timer);
				  submitBtn.textContent = originalText;
				  submitBtn.disabled = false;
				}
			  }, 1000);

			  const formData = new FormData(form);
			  try {
				const res = await fetch(scriptURL, { method: "POST", body: formData });
				const resultText = await res.text();
				console.log("Response raw:", resultText);

				let result;
				try {
				  result = JSON.parse(resultText);
				} catch {
				  result = { result: "error", message: "Invalid JSON: " + resultText };
				}

				if (result.result === "success") {
				  swal("Success!", "Data successfully sent to Spreadsheet!", "success");
				  form.reset();
				  ratingValue.value = "";
				  stars.forEach(s => s.classList.remove("active"));
				} else {
				  swal("Error!", "Script error: " + (result.message || "Unknown"), "error");
				}
			  } catch (err) {
				swal("Error!", "Failed to send data: " + err, "error");
			  }
			});
		</script>
  
		<script>
			const video = document.getElementById("intro");
			const info = document.getElementById("info");
			const music = document.getElementById("music");
			
			video.addEventListener("ended", () => {
				video.style.opacity = "0";
				
				setTimeout(() => {
					video.style.display = "none";
					info.style.display = "flex";
					music.play();
				}, 2000);
			});
		</script>
		
		<script>
		  const gameplayVideo = document.querySelector('#info video'); // ambil video gameplay
		  const bgMusic = document.getElementById('music');

		  if (gameplayVideo && bgMusic) {
			gameplayVideo.addEventListener('play', () => {
			  if (!bgMusic.paused) {
				bgMusic.pause();
			  }
			});

			gameplayVideo.addEventListener('pause', () => {
			  if (video.style.display === "none" && info.style.display === "flex") {
				bgMusic.play();
			  }
			});

			gameplayVideo.addEventListener('ended', () => {
			  if (video.style.display === "none" && info.style.display === "flex") {
				bgMusic.play();
			  }
			});
		  }
		</script>
</body>
</html>
